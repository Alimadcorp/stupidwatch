<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300;400;500;700&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <title>StupidWatch</title>
    <link rel="icon" href="https://img.itch.zone/aW1nLzE5NzcwODU2LnBuZw==/original/Mm2Mpt.png">
    <style>
      :root {
          --primary: #00ffea, --background: #0a0a0a, --background2: #0a0a0a, --surface: #1a1a1a, --text: #ffffff, --accent: #ffcc00, --overlay: rgba(0, 0, 0, 0.3), --border: #cccccc,--spborder: #0f0, --highlight-good: #00ff00, --highlight-bad: #ff0000, --dim-text: #ffffffcc, --scrollbar-thumb: #88888888, --scrollbar-track: #22222200, --bpc: #0ff, --blc: #d90, --bic: #000, --tpc: #000, --tlc: #000, --tic: #fff, --lapsat: 0.5, --lapval: 1, --font: 'Roboto Mono', --family: monospace
        }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
        transition: all 0.3s ease;
        scrollbar-width: thin;
        scrollbar-color: var(--scrollbar-thumb) var(--scrollbar-track);
      }
      *::-webkit-scrollbar {
        width: 3px;
        height: 2px;
      }
      *::-webkit-scrollbar-thumb {
        background: var(--scrollbar-thumb);
        border-radius: 3px;
      }
      *::-webkit-scrollbar-track {
        background: var(--scrollbar-track);
      }
      body {
        font-family: 'Roboto Mono', monospace;
        background-image: linear-gradient(to bottom, var(--background), var(--background2));
        color: var(--text);
        display: flex;
        flex-direction: column;
        margin: 0;
        height: 100vh;
      }
      .stopwatch-display {
        font-family: 'Roboto Mono', monospace;
        font-weight: 700;
        text-align: center;
        background: var(--surface);
        border: 2px solid var(--spborder);
        border-radius: 15px;
      }
      .rt {
        text-align: center;
      }
      .stats {
        display: grid;
        gap: 10px;
        margin: 2vh 0;
        overflow-x: auto;
      }
      .stat-box {
        border-radius: 10px;
        text-align: center;
        background: var(--surface);
        border: 2px solid var(--spborder);
      }
      .stat-label {
        color: var(--dim-text);
      }
      .stat-value {
        white-space: nowrap;
      }
      .lap-container {
        flex: 1;
        overflow-y: auto;
        background: var(--surface);
        border-radius: 5px;
        border: 2px solid var(--spborder);
      }
      .lap-item {
        display: flex;
        font-weight: bold;
        justify-content: space-between;
        border-bottom: 1px solid var(--border);
      }
      .lap-number {
        color: var(--dim-text);
        font-weight: 300;
      }
      .best-lap {
        color: var(--highlight-good);
        text-decoration: underline;
      }
      .worst-lap {
        color: var(--highlight-bad);
        text-decoration: underline;
      }
      .control-button {
        position: fixed;
        width: 100%;
        background: var(--background);
        color: var(--text);
        font-weight: 700;
        border: 3px solid #fff7;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 90%;
        user-select: none;
        touch-action: none;
        font-family: "Roboto Mono", monospace;
      }
      .button-container {
        position: fixed;
        left: 0;
        right: 0;
        display: flex;
        justify-content: space-around;
        align-items: center;
      }
      button {
        font-family: "Roboto Mono", monospace;
        background: var(--primary);
        color: var(--text);
        border: 2px solid var(--spborder);
        border-radius: 5px;
      }
      button:active {
        background: var(--text);
        color: var(--primary);
      }
      button:disabled {
          background: #888;
          color: #ccc;
          border-color: #777;
          cursor: not-allowed;
          opacity: 0.6;
      }
      input, select {
        font-family: "Roboto Mono", monospace;
        background: var(--accent);
        color: var(--text);
        border: 2px solid var(--spborder);
        border-radius: 5px;
      }
      .tools-modal {
        font-family: "Roboto Mono", monospace;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--overlay);
        display: none;
        z-index: 1000;
      }
      .modal-content {
        background: var(--overlay);
        border-radius: 15px;
        position: absolute;
        bottom: 20px;
        overflow-y: auto;
        text-align: center;
        border: 2px solid var(--spborder);
        backdrop-filter: blur(2px);
      }
      .export-data {
        white-space: pre-wrap;
        background: var(--surface);
        color: var(--text);
        border-radius: 10px;
        font-family: monospace;
        overflow: auto;
        border: 2px solid var(--spborder);
      }
      .split-container {
        display: flex;
        flex-direction: column;
      }
      input::placeholder {
        color: var(--text);
        opacity: 0.5;
      }
      .line {
        position: absolute;
        left: 0;
        width: 100%;
        height: 2px;
        background: #fff0;
      }
      .firstl {
        bottom: 41vh;
      }
      .secondl {
        top: 27vh;
      }
      .session-header {
        text-align: center;
        padding: 10px;
        background-color: rgba(0, 0, 0, 0.1);
        border-radius: 5px;
        margin-bottom: 10px;
      }
      @media(orientation: portrait) {
        .container {
          flex: 1;
          display: flex;
          flex-direction: column;
          padding: 5vw;
        }
        .stopwatch-display {
          font-size: 3vh;
          margin: 2vh 0;
          min-height: 9vh;
          padding: 4vw;
        }
        .rt {
          font-size: clamp(12px, 3vw, 24px);
        }
        .stats {
          grid-template-columns: repeat(3, 1fr);
          overflow-y: hidden;
        }
        .stat-box {
          padding: 3vw;
          height: 8vh;
        }
        .stat-label {
          font-size: 1.5vh;
        }
        .stat-value {
          font-size: 2vh;
        }
        .lap-container {
          max-height: calc(30vh);
          padding: 3vw;
          margin: 0;
        }
        .lap-item {
          font-size: 4vw;
          padding: 1.5vw 0;
        }
        .best-lap, .worst-lap {
          text-decoration-thickness: 6px;
        }
        .control-button {
          bottom: 3vh;
          left: 12px;
          right: 12px;
          height: 38vh;
          font-size: 5vw;
          width: calc(100% - 24px);
        }
        .button-container {
          bottom: 0;
          height: 5vh;
          background: #111;
          padding: 0px;
        }
        .button-container button {
          background: transparent;
          color: #fff;
          border: none;
          padding: 3px 6px;
          font-size: 5vw;
        }
        button {
          padding: 1vw 2vw;
          font-size: 4vw;
        }
        input, select {
          padding: 1vw 2vw;
          font-size: 3vw;
        }
        .tools-modal {
          font-size: 5vw;
          padding: 5vw;
        }
        .modal-content {
          backdrop-filter: blur(3px);
          padding: 5vw;
          max-width: 90vw;
          margin: 5vw auto;
          max-height: 90vh;
        }
        .modal-content button, .modal-content select, .modal-content input {
          width: 80%;
          font-size: 5vw;
          margin: 3vw;
        }
        .export-data {
          padding: 4vw;
          font-size: 12px;
          max-height: 25vh;
        }
      }
      @media (orientation: landscape) {
        .landscape-container {
          display: flex;
          flex-direction: row;
          height: calc(100vh - 100px);
        }
        .left-side, .right-side {
          width: 50%;
          height: 70vh;
          padding: 2vw;
          display: flex;
          flex-direction: column;
          justify-content: flex-start;
        }
        .stopwatch-display {
          font-size: 5vh;
          height: 20vh;
          margin: 1vh 0;
          padding: 3vw;
        }
        .rt {
          font-size: clamp(12px, 2vw, 24px);
        }
        .stats {
          grid-template-columns: 1fr;
          gap: 8px;
        }
        .stat-box {
          padding: 1vh;
          height: 10vh;
        }
        .stat-label {
          font-size: 2vh;
        }
        .stat-value {
          font-size: 3vh;
        }
        .lap-container {
          max-height: 65vh;
          padding: 2vw;
          margin: 2vw 0;
        }
        .lap-item {
          font-size: 1.5vw;
          padding: 1vh 0;
        }
        .best-lap, .worst-lap {
          text-decoration-thickness: 4px;
        }
        .control-button {
          bottom: 0;
          height: 8vh;
          font-size: 4vh;
        }
        .button-container {
          bottom: 8vh;
          height: 7vh;
          background: var(--surface);
          padding: 0;
        }
        .button-container button {
          background: transparent;
          color: var(--text);
          padding: 3px 6px;
          font-size: 3vh;
        }
        button {
          padding: 1vw 2vw;
          font-size: 3vw;
        }
        input, select {
          padding: 1vw 2vw;
          font-size: 3vw;
        }
        .tools-modal {
          width: 100%;
          height: 100%;
          font-size: 2vh;
          padding: 5vh;
        }
        .modal-content {
          max-height: 90vh;
          transform: scale(1) translateX(37.5vw);
          padding: 2vh;
          width: max(25vw, 300px);
        }
        .modal-content button, .modal-content select, .modal-content input {
          width: 80%;
          font-size: 2.5vh;
          padding: 1vh;
          margin: 1vh;
        }
        .export-data {
          padding: 2vh;
          font-size: 12px;
          max-height: 25vh;
        }
        .split-container {
          flex-direction: row;
          height: calc(100vh - 100px);
        }
        .left-panel, .right-panel {
          width: 50%;
          height: 100%;
          padding: 2vw;
        }
      }
    </style>
  </head>
  <body>
    <div class="line firstl"></div>
    <div class="line secondl"></div>
    <div class="container">
      <div class="split-container">
        <div class="left-panel">
          <center><p class="stat-value" id="disname" contenteditable style="outline: none;">New Session</p></center>
          <div class="stopwatch-display">
            <p class="rt">00:00.000</p>
          </div>
          <div class="stats">
            <div class="stat-box">
              <div class="stat-label">Current</div>
              <div class="stat-value" id="currentLap">00:00.000</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Average</div>
              <div class="stat-value" id="averageLap">00:00.000</div>
            </div>
            <div class="stat-box">
              <div class="stat-label">Laps</div>
              <div class="stat-value" id="lapCount">0</div>
            </div>
          </div>
        </div>
        <div class="right-panel">
          <div class="lap-container" id="lapContainer"></div>
        </div>
      </div>
      <button class="control-button" id="controlButton">Hold to Start</button>
      <div class="button-container">
        <button id="rest">Reset</button>
        <button id="manualLap">Add Lap</button>
        <button id="toggleToolsTrue">More</button>
      </div>
    </div>
    <div class="tools-modal" id="toolsModal">
      <div class="modal-content">
        <h2>More</h2>
        <br>
        <label for="themeSelect">Settings</label>
        <select id="themeSelect">
          <option value="dark">Dark Theme</option>
          <option value="light">Light Theme</option>
          <option value="neon">Neon Theme</option>
          <option value="matrix">Matrix Theme</option>
          <option value="sunset">Sunset Theme</option>
          <option value="cyberpunk">Cyberpunk Theme</option>
          <option value="ocean">Ocean Theme</option>
          <option value="forest">Forest Theme</option>
        </select>
        <br>
        <button id="toggleFullScreen">Toggle Fullscreen</button><br>
        <select id="measureass">
          <option value="yes">Don't pause on exit</option>
          <option value="no">Pause on exit</option>
          <option value="noo">Pause on lost focus</option>
        </select>
        <br>
        <label for="sessioninput">Session Name</label>
        <input type="text" id="sessioninput" placeholder="Enter session name" name="sessioninput">
        <br>
        <button id="promptSaveSession">Save Session</button>
        <br>
        <button id="uploadSession">Upload Session</button>
        <br>
        <select id="sessionSelect"></select>
        <br>
        <button id="loadSelectedSession">Load Selected Session</button>
        <br>
        <button id="showExportData">Export Data</button>
        <div id="exportData" class="export-data" style="display: none"></div>
        <div class="firebase-section">
          <h3>Load Online Session</h3>
          <input type="text" id="cloudSessionName" placeholder="Enter name to load" name="cloudSessionName">
          <button id="loadCSess">Load</button>
        </div>
        <h3>Manual Time Adjustment</h3>
        <input type="text" id="manualTimeInput" placeholder="HH:MM:SS.mmm">
        <button id="applyManualTime">Set Total Time</button>
        <br>
        <button id="addManualLap">Add Manual Lap</button>
        <button id="toggleTools">Close</button>
      </div>
    </div>
    <script type="module">
    let tsls = 0, 
        stateName = "New Session",
        isRunning = false,
        isLocked = false,
        toolsShown = false,
        startTime = 0,
        elapsedTime = 0,
        lastLapTime = 0,
        laps = [],
        lapNames = [],
        animationFrameId,
        touchStartY = 0,
        isTouchDevice = true,
        onloadDownload = null,
        bpc = "#0ff",
        blc = "#d90",
        bic = "#000",
        tpc = "#000",
        tlc = "#000",
        tic = "#fff",
        lapsat = 0.5,
        lapval = 1;
      let txts = {
        initial: "Hold to Start",
        started: "Swipe up to Lock",
        locked: "Swipe Down to Unlock",
        unlocked: "Release to Pause",
      };
      let wtxts = {
        initial: "Hold spacebar to Start",
        started: "Press L to Lock",
        locked: "Press L to Unlock",
        unlocked: "Hold Spacebar to Start",
      };
      let atxts = {
        initial: "Hold to Start",
        started: "Swipe up to Lock",
        locked: "Swipe Down to Unlock",
        unlocked: "Release to Pause",
      };
      function toggleFullScreen() {
        if (!document.fullscreenElement) {
          document.documentElement.requestFullscreen();
        } else {
          document.exitFullscreen();
        }
      }
      document.addEventListener('DOMContentLoaded', function() {
        window.addEventListener('popstate', function(event) {
          if (typeof toolsShown !== 'undefined' && toolsShown === true) {
            toggleTools(false);
            history.pushState(null, document.title, window.location.href);
            event.preventDefault();
          }
        });
        history.pushState(null, document.title, window.location.href);
      });
      const display = document.querySelector(".stopwatch-display");
      const disname = document.getElementById("disname");
      const controlButton = document.getElementById("controlButton");
      const theme = document.getElementById("themeSelect");
      const lapContainer = document.getElementById("lapContainer");
      const lapCount = document.getElementById("lapCount");
      const resetB = document.getElementById("rest");
      const averageLap = document.getElementById("averageLap");
      const currentLap = document.getElementById("currentLap");
      const toolsModal = document.getElementById("toolsModal");
      const exportData = document.getElementById("exportData");
      const sessionSelect = document.getElementById("sessionSelect");
      document.getElementById("toggleFullScreen").onclick = toggleFullScreen;
      document.getElementById("promptSaveSession").onclick = promptSaveSession;
      document.getElementById("loadSelectedSession").onclick = loadSelectedSession;
      document.getElementById("showExportData").onclick = showExportData;
      document.getElementById("toggleTools").onclick = function() { toggleTools(false); };
      document.getElementById("rest").onclick = resetTimer;
      document.getElementById("manualLap").onclick = manualLap;
      document.getElementById("toggleToolsTrue").onclick = function() { toggleTools(true); };
      const editableElement = document.getElementById('disname');
      let previousContent = editableElement.innerHTML;
      let timeoutId;
      function unfocusIfInactive() {
        document.activeElement.blur();
      }
      let blurdelay = 7500;
      editableElement.addEventListener('input', function(event) {
        const newContent = event.target.innerHTML;
        if (newContent !== previousContent) {
          previousContent = newContent;
          document.getElementById("sessioninput").value = newContent;
          stateName = newContent;
        }
        clearTimeout(timeoutId);
        timeoutId = setTimeout(unfocusIfInactive, blurdelay);
      });
      document.addEventListener('keydown', () => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(unfocusIfInactive, blurdelay);
      });
      document.addEventListener('click', () => {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(unfocusIfInactive, blurdelay);
      });
      function formatTime(ms) {
        let sign = ms < 0 ? "-" : "";
        if (ms < 0) ms = -ms;
        if (ms < 1000) return `${ms}ms`;
        if (ms < 60000) return `${(ms / 1000).toFixed(3)}s`;
        const totalSeconds = Math.floor(ms / 1000);
        const totalMinutes = Math.floor(totalSeconds / 60);
        const totalHours = Math.floor(totalMinutes / 60);
        const totalDays = Math.floor(totalHours / 24);
        const totalWeeks = Math.floor(totalDays / 7);
        const totalMonths = Math.floor(totalDays / 30.44);
        const totalYears = Math.floor(totalDays / 365.25);
        const totalDecades = Math.floor(totalYears / 10);
        const totalCenturies = Math.floor(totalYears / 100);
        const totalMillennia = Math.floor(totalYears / 1000);
        const millennia = totalMillennia ? `${totalMillennia}millennia` : "";
        const centuries = totalCenturies % 10 ? `${totalCenturies % 10}c` : "";
        const decades = totalDecades % 10 ? `${totalDecades % 10}dec` : "";
        const years = totalYears % 10 ? `${totalYears % 10}y` : "";
        const months = totalMonths % 12 ? `${totalMonths % 12}m` : "";
        const weeks = totalWeeks % 4 ? `${totalWeeks % 4}w` : "";
        const days = totalDays % 7 ? `${totalDays % 7}d` : "";
        const timeUnits = [
          millennia,
          centuries,
          decades,
          years,
          months,
          weeks,
          days,
        ]
          .filter(Boolean)
          .join("");
        const hours = String(totalHours % 24).padStart(2, "0");
        const minutes = String(totalMinutes % 60).padStart(2, "0");
        const seconds = String(totalSeconds % 60).padStart(2, "0");
        const milliseconds = String(ms % 1000).padStart(3, "0");
        return `${sign}${timeUnits} ${hours}:${minutes}:${seconds}.${milliseconds}`;
      }
      function updateDisplay() {
        display.innerHTML = formatTime(elapsedTime);
        currentLap.textContent = formatTime(elapsedTime - lastLapTime);
      }
      function startTimer() {
        if (!isRunning) {
          resetB.innerHTML = "Reset";
          startTime = Date.now() - elapsedTime;
          isRunning = true;
          controlButton.style.background = bpc;
          controlButton.style.color = tpc;
          controlButton.textContent = txts.started;
          runTimer();
          saveCurrentState();
        }
      }
      function stopTimer() {
        if (isRunning && !isLocked) {
          isRunning = false;
          cancelAnimationFrame(animationFrameId);
          if (elapsedTime - lastLapTime !== 0) {
            addLap();
          }
          controlButton.style.background = bic;
          controlButton.style.color = tic;
          controlButton.textContent = txts.initial;
          saveCurrentState();
        }
      }
      function runTimer() {
        function update() {
          elapsedTime = Date.now() - startTime;
          updateDisplay();
          if (isRunning) {
            animationFrameId = requestAnimationFrame(update);
          }
        }
        update();
      }
      function addLap() {
        const lapTime = elapsedTime - lastLapTime;
        if (lapTime === 0) return;
        lastLapTime = elapsedTime;
        laps.push(lapTime);
        lapNames.push("Lap " + laps.length);
        updateLapList();
        updateStats();
        saveCurrentState();
      }
      function parseTimeString(timeString) {
        const parts = timeString.split(/[:.]/);
        let ms = 0;
        if (parts.length === 4) {
          ms += parseInt(parts[0]) * 3600000;
          ms += parseInt(parts[1]) * 60000;
          ms += parseInt(parts[2]) * 1000;
          ms += parseInt(parts[3].padEnd(3, '0'));
        } else if (parts.length === 3) {
          ms += parseInt(parts[0]) * 60000;
          ms += parseInt(parts[1]) * 1000;
          ms += parseInt(parts[2].padEnd(3, '0'));
        } else if (parts.length === 2) {
          ms += parseInt(parts[0]) * 1000;
          ms += parseInt(parts[1].padEnd(3, '0'));
        }
        return ms;
      }
      document.getElementById('applyManualTime').addEventListener('click', () => {
        const input = document.getElementById('manualTimeInput').value;
        try {
          const newTime = parseTimeString(input);
          elapsedTime = newTime;
          lastLapTime = newTime - (laps.reduce((a, b) => a + b, 0) || 0);
          updateDisplay();
          saveCurrentState();
        } catch (e) {
          alert('Invalid time format! Use HH:MM:SS.mmm');
        }
      });
      document.getElementById('addManualLap').addEventListener('click', () => {
        const input = document.getElementById('manualTimeInput').value;
        try {
          const lapTime = parseTimeString(input);
          laps.push(lapTime);
          lapNames.push("Manual Lap " + laps.length);
          lastLapTime += lapTime;
          updateLapList();
          updateStats();
          saveCurrentState();
        } catch (e) {
          alert('Invalid lap time format!');
        }
      });
      function hsvToRgb(h, s, v) {
        let r, g, b;
        const i = Math.floor(h * 6);
        const f = h * 6 - i;
        const p = v * (1 - s);
        const q = v * (1 - f * s);
        const t = v * (1 - (1 - f) * s);
        switch (i % 6) {
          case 0:
            r = v;
            g = t;
            b = p;
            break;
          case 1:
            r = q;
            g = v;
            b = p;
            break;
          case 2:
            r = p;
            g = v;
            b = t;
            break;
          case 3:
            r = p;
            g = q;
            b = v;
            break;
          case 4:
            r = t;
            g = p;
            b = v;
            break;
          case 5:
            r = v;
            g = p;
            b = q;
            break;
        }
        return {
          r: Math.floor(r * 255),
          g: Math.floor(g * 255),
          b: Math.floor(b * 255),
        };
      }
      function updateLapList() {
        lapContainer.innerHTML = laps
          .map((lap, index) => {
            const minLap = Math.min(...laps);
            const maxLap = Math.max(...laps);
            const lapPercentage =
              maxLap !== minLap
                ? Math.log(lap / minLap) / Math.log(maxLap / minLap)
                : 0;
            const h = (1 - lapPercentage) * 0.5;
            const { r, g, b } = hsvToRgb(h, lapsat, lapval);
            const gradientColor = `rgb(${r}, ${g}, ${b})`;
            let ln = lapNames[index];
            return `
        <div class="lap-item ${lap === minLap ? "best-lap" : ""} ${
              lap === maxLap ? "worst-lap" : ""
            }">
        <span class="lap-number" contenteditable style="outline:none" name="${index}">${ln}</span>
        <span class="lap-time" data-lap-index="${index}" style="color: ${gradientColor}; outline:none">${formatTime(lap)}</span>
        </div>`;
          })
          .join("");
          lapContainer.addEventListener('input', (e) => {
          if (e.target.classList.contains('lap-time')) {
            const index = parseInt(e.target.dataset.lapIndex);
            try {
              const newTime = parseTimeString(e.target.textContent);
              const timeDiff = newTime - laps[index];
              laps[index] = newTime;
              elapsedTime += timeDiff;
              lastLapTime += timeDiff;
              updateDisplay();
              updateStats();
              saveCurrentState();
            } catch (error) {
              alert('Invalid time format!');
              e.target.textContent = formatTime(laps[index]);
            }
          }
        });
        lapContainer.scrollTo({
          top: lapContainer.scrollHeight,
          behavior: "smooth",
        });
      }
      function updateStats() {
        lapCount.textContent = laps.length;
        const average = Math.floor(
          laps.reduce((a, b) => a + b, 0) / (laps.length || 1)
        );
        averageLap.textContent = formatTime(average);
      }
      function lockTimer() {
        isLocked = true;
        controlButton.classList.add("locked");
        controlButton.textContent = txts.locked;
        controlButton.style.background = blc;
        controlButton.style.color = tlc;
        saveCurrentState();
      }
      function unlockTimer() {
        isLocked = false;
        controlButton.classList.remove("locked");
        controlButton.style.background = bpc;
        controlButton.style.color = tpc;
        controlButton.textContent = txts.unlocked;
        saveCurrentState();
      }
      function saveCurrentState() {
        if (elapsedTime === 0) return;
        const state = {
          timestamp: new Date().toISOString(),
          elapsedTime,
          laps,
          lapNames,
          name: stateName,
          lastLapTime,
          isRunning,
          isLocked,
        };
        localStorage.setItem("currentStopwatchState", JSON.stringify(state));
      }
      document.addEventListener("visibilitychange", function () {
        if (localStorage.getItem("addoffline") == "noo") {
          if (isRunning) {
            unlockTimer();
            stopTimer();
          }
        }
        tsls = performance.now();
      });
      function loadCurrentState() {
        const stateStr = localStorage.getItem("currentStopwatchState");
        if (stateStr) {
          const state = JSON.parse(stateStr);
          let timeSinceSave = new Date() - new Date(state.timestamp);
          if(state.name != undefined && state.name != null){
            stateName = state.name;
          }
          if ((localStorage.getItem("addoffline") || "").startsWith("no")) {
            timeSinceSave = 0;
            state.isRunning = state.isLocked = false;
          }
          elapsedTime =
            state.elapsedTime + (state.isRunning ? timeSinceSave : 0);
          laps = state.laps;
          if (
            state.laps.length > 0 &&
            (state.lapNames == null || state.lapNames[0] == undefined)
          ) {
            for (let i = 0; i < laps.length; i++) {
              lapNames.push("Lap " + (i + 1));
            }
          } else {
            lapNames = state.lapNames;
          }
          lastLapTime = state.lastLapTime;
          isLocked = state.isLocked;
          if (state.isRunning) {
            isRunning = false;
            startTimer();
            if (isLocked) {
              lockTimer();
            }
            updateDisplay();
          } else {
            isRunning = false;
            updateDisplay();
            addLap();
            currentLap.textContent = formatTime(laps[laps.length - 1]);
            cancelAnimationFrame(animationFrameId);
          }
          updateLapList();
          updateStats();
        } else {
          stateName = generateName();
        }
      }
      let saveIntervalTimeoutId;
      function saveInterval() {
        let ls = lapContainer.querySelectorAll(".lap-number");
        for (let i = 0; i < ls.length; i++) {
          lapNames[i] = ls[i].innerHTML;
        }
        saveCurrentState();
        saveIntervalTimeoutId = setTimeout(saveInterval, 500 + laps.length * 4);
      }
      saveInterval();
      window.addEventListener("unload", function () {
        if (saveIntervalTimeoutId) {
          clearTimeout(saveIntervalTimeoutId);
        }
        if (animationFrameId) {
          cancelAnimationFrame(animationFrameId);
        }
      });
      function toggleTools(show) {
        toolsShown = show;
        toolsModal.style.display = show ? "block" : "none";
        if (show) {
          document.getElementById("sessioninput").value = stateName;
          exportData.style.display = "none";
        }
      }
      document.getElementById("sessioninput").addEventListener("change", function() {
        stateName = this.value;
        document.getElementById("disname").innerHTML = this.value;
      });
      function promptSaveSession() {
        const sessionName = document.getElementById("sessioninput").value;
        if (sessionName) {
          saveSession(sessionName);
        } else {
          alert("Please enter a session name!");
        }
      }
      function saveSession(sessionName) {
        const key = "stopwatchSession-" + sessionName;
        const session = {
          timestamp: new Date().toISOString(),
          elapsedTime,
          laps,
          lapNames,
          lastLapTime,
          isRunning,
          isLocked,
          name: stateName,
        };
        localStorage.setItem(key, JSON.stringify(session));
        populateSessionDropdown();
      }
      function populateSessionDropdown() {
        sessionSelect.innerHTML = "";
        for (let i = 0; i < localStorage.length; i++) {
          const key = localStorage.key(i);
          if (key.startsWith("stopwatchSession-")) {
            const option = document.createElement("option");
            option.value = key;
            option.textContent = key.replace("stopwatchSession-", "");
            sessionSelect.appendChild(option);
          }
        }
      }
      function loadSelectedSession() {
        const key = sessionSelect.value;
        loadSession(key);
      }
      function loadSession(key) {
        let sessionStr;
        if(key.elapsedTime == null || key.elapsedTime == undefined){
          sessionStr = JSON.parse(localStorage.getItem(key));
        }else{
          sessionStr = key;
        }
        if (sessionStr) {
          const session = sessionStr;
          const timeSinceSave = new Date() - new Date(session.timestamp);
          elapsedTime =
            session.elapsedTime + (session.isRunning ? timeSinceSave : 0);
          laps = session.laps;
          if (session.laps.length > 0 && session.lapNames == null) {
            for (let i = 0; i < laps.length; i++) {
              lapNames.push("Lap " + (i + 1));
            }
          } else {
            lapNames = session.lapNames;
          }
          if(session.name != undefined && session.name != null){
            stateName = session.name;
          } else {
            stateName = key.substring(17);
          }
          document.getElementById("disname").innerHTML = stateName;
          lastLapTime = session.lastLapTime;
          isRunning = session.isRunning;
          isLocked = session.isLocked;
          updateDisplay();
          updateLapList();
          updateStats();
          if (session.isRunning) {
            isRunning = false;
            startTimer();
            if (session.isLocked) {
              lockTimer();
            }
          } else {
            isLocked = false;
            stopTimer();
            controlButton.style.background = bic;
            controlButton.style.color = tic;
            controlButton.textContent = txts.initial;
            cancelAnimationFrame(animationFrameId);
          }
          toggleTools(false);
        } else {
          alert("No session found with name: " + key);
        }
      }
      function showExportData() {
        const csv = laps
          .map((lap, index) => `${lapNames[index]},${formatTime(lap)}`)
          .join("\n");
        exportData.textContent = `Total,${formatTime(elapsedTime)}\n${csv}`;
        exportData.style.display = "block";
      }
      document.getElementById('disname').spellcheck = false;
      document.getElementById('sessioninput').spellcheck = false;
      function resetTimer() {
        if (elapsedTime !== 0) {
          isRunning = false;
          isLocked = false;
          cancelAnimationFrame(animationFrameId);
          elapsedTime = 0;
          lastLapTime = 0;
          laps = [];
          lapNames = [];
          stateName = generateName();
          updateDisplay();
          updateLapList();
          updateStats();
          controlButton.textContent = txts.initial;
          controlButton.style.background = bic;
          resetB.innerHTML = "Restore";
          controlButton.style.color = tic;
          controlButton.classList.remove("locked");
          stopTimer();
        } else {
          resetB.innerHTML = "Reset";
          loadCurrentState();
        }
      }
      function manualLap() {
        if (elapsedTime > 0) {
          addLap();
        }
      }
      let myIp = "unknown"; let myCo = "unknown";
      document.addEventListener('DOMContentLoaded', function() {
        const firebaseScript = document.createElement('script');
        firebaseScript.src = 'https://www.gstatic.com/firebasejs/11.3.1/firebase-app-compat.js';
        document.head.appendChild(firebaseScript);
        const firestoreScript = document.createElement('script');
        firestoreScript.src = 'https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore-compat.js';
        document.head.appendChild(firestoreScript);
        firestoreScript.onload = initializeFirebase;
        fetch("https://api.country.is").then((response)=>response.json()).then((data)=>{myIp = data.ip; myCo = data.country});
      });
      let db;
      function initializeFirebase() {
        const firebaseConfig = {
          apiKey: "AIzaSyDB4Q9QyPT-7knY1wyX2xsatXUjMdoD-nU",
          authDomain: "stupidwatch-3571c.firebaseapp.com",
          projectId: "stupidwatch-3571c",
          storageBucket: "stupidwatch-3571c.firebasestorage.app",
          messagingSenderId: "1081893342900",
          appId: "1:1081893342900:web:6739bdc410a7649d9d11e1",
          measurementId: "G-FVV4VRGHJT"
        };
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();
        setupFirebaseListeners();
      }
      function setupFirebaseListeners() {
        document.getElementById('uploadSession').addEventListener('click', uploadCurrentSession);
        document.getElementById('loadCSess').addEventListener('click', loadCloudSessions);
        if(onloadDownload){
          downloadSession(onloadDownload);
        }
      }
      function uploadCurrentSession() {
        if (elapsedTime === 0 && laps.length === 0) {
          alert("No active session to upload!");
          return;
        }
        let sessionName = stateName.trim();
        if (!sessionName) {
          alert("Please enter a session name!");
          return;
        }
        let mySessions = JSON.parse(localStorage.getItem("myuploadsessions") ? localStorage.getItem("myuploadsessions") : "[]");
        let iownthis = false;
        for(let i = 0; i < mySessions.length; i++){
          if(mySessions[i] == sessionName){
            iownthis = true;
          }
        }
        document.getElementById("uploadSession").disabled = true;
        db.collection("sessions").doc(sessionName).get()
          .then((doc) => {
            if (doc.exists) {
              if(iownthis){
                if (confirm(`Session "${sessionName}" already exists. Replace?`)) {
                  saveToFirebase(sessionName);
                } else{
                  enableButt();
                }
              } else{
              if (confirm(`Session "${sessionName}" already exists. Automatically choose random name?`)) {
                stateName = generateName();
                sessionName = stateName;
                toggleTools(true);
                document.getElementById("disname").innerHTML = stateName;
                saveToFirebase(sessionName);
              } else{
                  enableButt();
                }
            }
            } else {
              saveToFirebase(sessionName);
            }
          })
          .catch((error) => {
            console.error("Error uploading session: ", error);
            alert("Failed to upload session. Please try again.");
          });
      }
      function saveToFirebase(sessionName) {
        document.getElementById("uploadSession").disabled = true;
        setTimeout(enableButt, 2000);
        const sessionData = {
          timestamp: new Date().toISOString(),
          elapsedTime,
          laps,
          lapNames,
          lastLapTime,
          name: sessionName,
          totalTime: formatTime(elapsedTime),
          lapCount: laps.length,
          uploderIP: myIp,
          uploaderCountry: myCo,
        };
        db.collection("sessions").doc(sessionName).set(sessionData)
          .then(() => {
            let mySessions = JSON.parse(localStorage.getItem("myuploadsessions") ? localStorage.getItem("myuploadsessions") : "[]");
            mySessions.push(sessionName);
            localStorage.setItem("myuploadsessions", JSON.stringify(mySessions));
            alert(`Session "${sessionName}" uploaded successfully!`);
          })
          .catch((error) => {
            console.error("Error uploading session: ", error);
            alert("Failed to upload session. Please try again.");
          });
      }
      function loadCloudSessions() {
        let sessionLoadName = document.getElementById("cloudSessionName").value;
        document.getElementById("loadCSess").disabled = true;
        setTimeout(enableButt, 2000);
        downloadSession(sessionLoadName);
      }
      function enableButt() {
          document.getElementById("loadCSess").disabled = false;
          document.getElementById("uploadSession").disabled = false;
      }
      function downloadSession(sessionName) {
        db.collection("sessions").doc(sessionName).get()
          .then((doc) => {
            if (doc.exists) {
              const sessionData = doc.data();
              if (isRunning) {
                isRunning = false;
                cancelAnimationFrame(animationFrameId);
              }
              loadSession(sessionData);
              saveSession(sessionName);
              alert(`Session "${sessionName}" loaded successfully!`);
              toggleTools(false);
            } else {
              alert(`Session "${sessionName}" not found!`);
            }
          })
          .catch((error) => {
            console.error("Error downloading session: ", error);
            alert("Failed to download session. Please try again.");
          });
      }
      function deleteCloudSession(sessionName) {
        if (confirm(`Are you sure you want to delete "${sessionName}"?`)) {
          db.collection("stopwatchSessions").doc(sessionName).delete()
            .then(() => {
              alert(`Session "${sessionName}" deleted successfully!`);
              loadCloudSessions();
            })
            .catch((error) => {
              console.error("Error deleting session: ", error);
              alert("Failed to delete session. Please try again.");
            });
        }
      }
      controlButton.addEventListener("touchstart", (e) => {
        e.preventDefault();
        touchStartY = e.touches[0].clientY;
        startTimer();
      });
      controlButton.addEventListener("touchend", (e) => {
        e.preventDefault();
        if (!isLocked) stopTimer();
      });
      controlButton.addEventListener("touchmove", (e) => {
        e.preventDefault();
        const currentY = e.touches[0].clientY;
        if (touchStartY - currentY > 50 && !isLocked) {
          lockTimer();
        } else if (currentY - touchStartY > 50 && isLocked) {
          unlockTimer();
        }
      });
      controlButton.addEventListener("mousedown", () => {
        unlockTimer();
        startTimer();
      });
      controlButton.addEventListener("mouseup", () => {
        if (!isLocked) stopTimer();
      });
      controlButton.addEventListener("mouseleave", () => {
        if (isRunning) {
          lockTimer();
        }
      });
      function isEditing() {
        const activeElement = document.activeElement;
        if(!activeElement) return false;
        if (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA') return true;
        if (activeElement.contentEditable && activeElement.contentEditable != 'inherit') {
          return true;
        }
        return false;
      }
      document.addEventListener("keydown", function (e) {
        if (e.code === "Space" && !isEditing()) {
          if (!isRunning) {
            startTimer();
          }
          e.preventDefault();
        } else if (e.code === "KeyL" && !isEditing()) {
          if (!isLocked) {
            startTimer();
            lockTimer();
          } else if (isLocked) {
            unlockTimer();
            stopTimer();
          }
        } else if (e.code === "KeyA" && !isEditing()) {
          manualLap();
        } else if (e.code === "KeyR" && !isEditing()) {
          resetTimer();
        }
      });
      document.addEventListener("keyup", function (e) {
        if (e.code === "Space" && !isEditing()) {
          if (isRunning && !isLocked) {
            stopTimer();
          }
          e.preventDefault();
        }
      });
      document.addEventListener("DOMContentLoaded", function () {
        if (window.matchMedia("(pointer: coarse)").matches) {
          isTouchDevice = true;
          txts = atxts;
        } else {
          isTouchDevice = false;
          txts = wtxts;
        }
        controlButton.textContent = txts.initial;
        populateSessionDropdown();
      });
      window.addEventListener("DOMContentLoaded", () => {
        loadCurrentState();
      });
      window.addEventListener("beforeunload", () => {
        saveCurrentState();
        setTimeout(saveInterval, 3000);
        document.getElementById("measureass").value =
          localStorage.getItem("addoffline") || "yes";
      });
      window.addEventListener("blur", function () {
        if (localStorage.getItem("addoffline") == "noo") {
          if (isRunning) {
            unlockTimer();
            stopTimer();
          }
        }
      });
      document
        .getElementById("measureass")
        .addEventListener("change", function () {
          localStorage.setItem("addoffline", this.value);
        });
      document.addEventListener("touchstart", (event) => {
        txts = atxts;
      });
      document.addEventListener("keydown", (event) => {
        txts = wtxts;
      });
      const themes = {
        dark: {
          "--primary": "#000",
          "--background2": "#000",
          "--background": "#000",
          "--surface": "#222",
          "--text": "#ffffff",
          "--accent": "#000",
          "--overlay": "#4445",
          "--border": "#cccccc",
          "--highlight-good": "#99ff99",
          "--highlight-bad": "#ff9999",
          "--dim-text": "#ffffffcc",
          "--scrollbar-thumb": "#88888888",
          "--scrollbar-track": "#22222200",
          "--bpc": "#0ff",
          "--blc": "#503",
          "--bic": "#000",
          "--spborder": "#0003",
          "--tpc": "#000",
          "--tlc": "#fff",
          "--tic": "#fff",
          "--lapsat": "0.5",
          "--lapval": "1",
          "--font": "'Roboto Mono', monospace",
        },
        light: {
          "--primary": "#fff",
          "--background": "#fff",
          "--background2": "#fdd",
          "--surface": "#eee",
          "--text": "#000000",
          "--accent": "#fffd",
          "--spborder": "#0000",
          "--overlay": "#ddd7",
          "--border": "#333333",
          "--highlight-good": "#008000",
          "--highlight-bad": "#ff4444",
          "--dim-text": "#000000cc",
          "--scrollbar-thumb": "#bbbbbb88",
          "--scrollbar-track": "#dddddd00",
          "--bpc": "#00f",
          "--blc": "#ff8800",
          "--bic": "#000",
          "--tpc": "#fff",
          "--tlc": "#222",
          "--tic": "#fff",
          "--lapsat": "1",
          "--lapval": "0.4",
          "--font": "'Open Sans', sans-serif",
        },
        matrix: {
          "--primary": "#000",
          "--background": "#000",
          "--background2": "#050",
          "--surface": "#020",
          "--text": "#0f0",
          "--accent": "#000",
          "--overlay": "rgba(0, 25, 0, 0.3)",
          "--border": "#0f0",
          "--spborder": "#0f0",
          "--highlight-good": "#00ff99",
          "--highlight-bad": "#ff0033",
          "--dim-text": "#3f3c",
          "--scrollbar-thumb": "#0f08",
          "--scrollbar-track": "#2200",
          "--bpc": "#0f0",
          "--blc": "#0a0",
          "--bic": "#000",
          "--tpc": "#000",
          "--tlc": "#000",
          "--tic": "#0f0",
          "--lapsat": "1",
          "--lapval": "1",
          "--font": "'Orbitron', sans-serif",
        },
        neon: {
          "--primary": "#03a",
          "--background": "#027",
          "--background2": "#703",
          "--surface": "#fff2",
          "--text": "#fff",
          "--accent": "#03a",
          "--overlay": "rgba(0, 0, 0, 0.3)",
          "--border": "#cccccc",
          "--highlight-good": "#99ff99",
          "--highlight-bad": "#ff9999",
          "--dim-text": "#ffffffcc",
          "--scrollbar-thumb": "#88888888",
          "--scrollbar-track": "#22222200",
          "--bpc": "#0ff",
          "--blc": "purple",
          "--bic": "#000",
          "--tpc": "#000",
          "--spborder": "#0ff4",
          "--tlc": "#fff",
          "--tic": "#fff",
          "--lapsat": "0.7",
          "--lapval": "1",
          "--font": "'Press Start 2P', cursive",
        },
        sunset: {
          "--primary": "#420",
          "--background": "#ffcc88",
          "--background2": "#ff9966",
          "--surface": "#321d",
          "--text": "#fed",
          "--spborder": "#0000",
          "--accent": "#420",
          "--overlay": "rgba(255, 102, 0, 0.3)",
          "--border": "#fffa",
          "--highlight-good": "#0ff",
          "--highlight-bad": "#f07",
          "--dim-text": "#dcb",
          "--scrollbar-thumb": "#ff774488",
          "--scrollbar-track": "#ffcc8800",
          "--bpc": "#057",
          "--blc": "#882200",
          "--bic": "#331100",
          "--tpc": "#fff",
          "--tlc": "#c95",
          "--tic": "#ffeecc",
          "--lapsat": "0.7",
          "--lapval": "1",
          "--font": "'Pacifico', cursive",
        },
        cyberpunk: {
          "--primary": "#004",
          "--background": "#111133",
          "--background2": "#220055",
          "--surface": "#330066",
          "--text": "#2ff",
          "--spborder": "#f0aa",
          "--accent": "#004",
          "--overlay": "rgba(0, 0, 255, 0.3)",
          "--border": "#ffaaffaa",
          "--highlight-good": "#00ff99",
          "--highlight-bad": "#ff0033",
          "--dim-text": "#3ffc",
          "--scrollbar-thumb": "#ff00ff88",
          "--scrollbar-track": "#22005500",
          "--bpc": "#0ff",
          "--blc": "#f09",
          "--bic": "#330066",
          "--tpc": "#f7f",
          "--tlc": "#7ff",
          "--tic": "#ffffff",
          "--lapsat": "1",
          "--lapval": "1",
          "--font": "'Orbitron', sans-serif",
        },
        ocean: {
          "--primary": "#029",
          "--background": "#013",
          "--background2": "#048",
          "--surface": "#059a",
          "--text": "#ffffff",
          "--spborder": "#0000",
          "--accent": "#029",
          "--overlay": "rgba(0, 102, 255, 0.3)",
          "--border": "#0066cc",
          "--highlight-good": "#00ffcc",
          "--highlight-bad": "#ff3300",
          "--dim-text": "#ffffffcc",
          "--scrollbar-thumb": "#0088ff88",
          "--scrollbar-track": "#00336600",
          "--bpc": "#00ccff",
          "--blc": "#0088ff",
          "--bic": "#002244",
          "--tpc": "#ffffff",
          "--tlc": "#00ccff",
          "--tic": "#ffffff",
          "--lapsat": "0.8",
          "--lapval": "1",
          "--font": "'Nunito', sans-serif",
        },
        forest: {
          "--primary": "#4caf50",
          "--background": "#1b5e20",
          "--background2": "#2e7d32",
          "--surface": "#1b5e20",
          "--text": "#ffffff",
          "--accent": "#4caf50",
          "--spborder": "#0000",
          "--overlay": "rgba(0, 100, 0, 0.3)",
          "--border": "#81c784",
          "--highlight-good": "#a5d6a7",
          "--highlight-bad": "#ef9a9a",
          "--dim-text": "#ffffffcc",
          "--scrollbar-thumb": "#66bb6a88",
          "--scrollbar-track": "#2e7d3200",
          "--bpc": "#4caf50",
          "--blc": "#1b5e20",
          "--bic": "#2e7d32",
          "--tpc": "#ffffff",
          "--tlc": "#4caf50",
          "--tic": "#ffffff",
          "--lapsat": "0.5",
          "--lapval": "1",
          "--font": "'Montserrat', sans-serif",
        },
      };
      document
        .getElementById("themeSelect")
        .addEventListener("change", function () {
          setTheme(this.value);
        });
      function setTheme(themeName) {
        const theme = themes[themeName];
        if (!theme) return;
        Object.keys(theme).forEach((key) => {
          document.documentElement.style.setProperty(key, theme[key]);
        });
        updateJSVars();
        localStorage.setItem("theme", themeName);
      }
      function updateJSVars() {
        bpc = getComputedStyle(document.documentElement)
          .getPropertyValue("--bpc")
          .trim();
        blc = getComputedStyle(document.documentElement)
          .getPropertyValue("--blc")
          .trim();
        bic = getComputedStyle(document.documentElement)
          .getPropertyValue("--bic")
          .trim();
        tpc = getComputedStyle(document.documentElement)
          .getPropertyValue("--tpc")
          .trim();
        tlc = getComputedStyle(document.documentElement)
          .getPropertyValue("--tlc")
          .trim();
        tic = getComputedStyle(document.documentElement)
          .getPropertyValue("--tic")
          .trim();
        lapsat = parseFloat(
          getComputedStyle(document.documentElement).getPropertyValue(
            "--lapsat"
          )
        );
        lapval = parseFloat(
          getComputedStyle(document.documentElement).getPropertyValue(
            "--lapval"
          )
        );
        if (!isRunning) {
          controlButton.style.background = bic;
          controlButton.style.color = tic;
        } else {
          controlButton.style.background = blc;
          controlButton.style.color = tlc;
        }
        updateLapList();
      }
      function loadTheme() {
        const savedTheme = localStorage.getItem("theme") || "dark";
        setTheme(savedTheme);
      }
      document.addEventListener("DOMContentLoaded", loadTheme);
      document.addEventListener("DOMContentLoaded", () => {
        const savedTheme = localStorage.getItem("theme") || "dark";
        document.getElementById("themeSelect").value = savedTheme;
      });
      function capFirst(string) {
          return string.charAt(0).toUpperCase() + string.slice(1);
      }
      function getRandomInt(min, max) {
          return Math.floor(Math.random() * (max - min)) + min;
      }
      function generateName(){
        var name1 = ["abandoned","able","absolute","adorable","adventurous","academic","acceptable","acclaimed","accomplished","accurate","aching","acidic","acrobatic","active","actual","adept","admirable","admired","adolescent","adorable","adored","advanced","afraid","affectionate","aged","aggravating","aggressive","agile","agitated","agonizing","agreeable","ajar","alarmed","alarming","alert","alienated","alive","all","altruistic","amazing","ambitious","ample","amused","amusing","anchored","ancient","angelic","angry","anguished","animated","annual","another","antique","anxious","any","apprehensive","appropriate","apt","arctic","arid","aromatic","artistic","ashamed","assured","astonishing","athletic","attached","attentive","attractive","austere","authentic","authorized","automatic","avaricious","average","aware","awesome","awful","awkward","babyish","bad","back","baggy","bare","barren","basic","beautiful","belated","beloved","beneficial","better","best","bewitched","big","big-hearted","biodegradable","bite-sized","bitter","black","black-and-white","bland","blank","blaring","bleak","blind","blissful","blond","blue","blushing","bogus","boiling","bold","bony","boring","bossy","both","bouncy","bountiful","bowed","brave","breakable","brief","bright","brilliant","brisk","broken","bronze","brown","bruised","bubbly","bulky","bumpy","buoyant","burdensome","burly","bustling","busy","buttery","buzzing","calculating","calm","candid","canine","capital","carefree","careful","careless","caring","cautious","cavernous","celebrated","charming","cheap","cheerful","cheery","chief","chilly","chubby","circular","classic","clean","clear","clear-cut","clever","close","closed","cloudy","clueless","clumsy","cluttered","coarse","cold","colorful","colorless","colossal","comfortable","common","compassionate","competent","complete","complex","complicated","composed","concerned","concrete","confused","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","coordinated","corny","corrupt","costly","courageous","courteous","crafty","crazy","creamy","creative","creepy","criminal","crisp","critical","crooked","crowded","cruel","crushing","cuddly","cultivated","cultured","cumbersome","curly","curvy","cute","cylindrical","damaged","damp","dangerous","dapper","daring","darling","dark","dazzling","dead","deadly","deafening","dear","dearest","decent","decimal","decisive","deep","defenseless","defensive","defiant","deficient","definite","definitive","delayed","delectable","delicious","delightful","delirious","demanding","dense","dental","dependable","dependent","descriptive","deserted","detailed","determined","devoted","different","difficult","digital","diligent","dim","dimpled","dimwitted","direct","disastrous","discrete","disfigured","disgusting","disloyal","dismal","distant","downright","dreary","dirty","disguised","dishonest","dismal","distant","distinct","distorted","dizzy","dopey","doting","double","downright","drab","drafty","dramatic","dreary","droopy","dry","dual","dull","dutiful","each","eager","earnest","early","easy","easy-going","ecstatic","edible","educated","elaborate","elastic","elated","elderly","electric","elegant","elementary","elliptical","embarrassed","embellished","eminent","emotional","empty","enchanted","enchanting","energetic","enlightened","enormous","enraged","entire","envious","equal","equatorial","essential","esteemed","ethical","euphoric","even","evergreen","everlasting","every","evil","exalted","excellent","exemplary","exhausted","excitable","excited","exciting","exotic","expensive","experienced","expert","extraneous","extroverted","extra-large","extra-small","fabulous","failing","faint","fair","faithful","fake","false","familiar","famous","fancy","fantastic","far","faraway","far-flung","far-off","fast","fat","fatal","fatherly","favorable","favorite","fearful","fearless","feisty","feline","female","feminine","few","fickle","filthy","fine","finished","firm","first","firsthand","fitting","fixed","flaky","flamboyant","flashy","flat","flawed","flawless","flickering","flimsy","flippant","flowery","fluffy","fluid","flustered","focused","fond","foolhardy","foolish","forceful","forked","formal","forsaken","forthright","fortunate","fragrant","frail","frank","frayed","free","French","fresh","frequent","friendly","frightened","frightening","frigid","frilly","frizzy","frivolous","front","frosty","frozen","frugal","fruitful","full","fumbling","functional","funny","fussy","fuzzy","gargantuan","gaseous","general","generous","gentle","genuine","giant","giddy","gigantic","gifted","giving","glamorous","glaring","glass","gleaming","gleeful","glistening","glittering","gloomy","glorious","glossy","glum","golden","good","good-natured","gorgeous","graceful","gracious","grand","grandiose","granular","grateful","grave","gray","great","greedy","green","gregarious","grim","grimy","gripping","grizzled","gross","grotesque","grouchy","grounded","growing","growling","grown","grubby","gruesome","grumpy","guilty","gullible","gummy","hairy","half","handmade","handsome","handy","happy","happy-go-lucky","hard","hard-to-find","harmful","harmless","harmonious","harsh","hasty","hateful","haunting","healthy","heartfelt","hearty","heavenly","heavy","hefty","helpful","helpless","hidden","hideous","high","high-level","hilarious","hoarse","hollow","homely","honest","honorable","honored","hopeful","horrible","hospitable","hot","huge","humble","humiliating","humming","humongous","hungry","hurtful","husky","icky","icy","ideal","idealistic","identical","idle","idiotic","idolized","ignorant","ill","illegal","ill-fated","ill-informed","illiterate","illustrious","imaginary","imaginative","immaculate","immaterial","immediate","immense","impassioned","impeccable","impartial","imperfect","imperturbable","impish","impolite","important","impossible","impractical","impressionable","impressive","improbable","impure","inborn","incomparable","incompatible","incomplete","inconsequential","incredible","indelible","inexperienced","indolent","infamous","infantile","infatuated","inferior","infinite","informal","innocent","insecure","insidious","insignificant","insistent","instructive","insubstantial","intelligent","intent","intentional","interesting","internal","international","intrepid","ironclad","irresponsible","irritating","itchy","jaded","jagged","jam-packed","jaunty","jealous","jittery","joint","jolly","jovial","joyful","joyous","jubilant","judicious","juicy","jumbo","junior","jumpy","juvenile","kaleidoscopic","keen","key","kind","kindhearted","kindly","klutzy","knobby","knotty","knowledgeable","knowing","known","kooky","kosher","lame","lanky","large","last","lasting","late","lavish","lawful","lazy","leading","lean","leafy","left","legal","legitimate","light","lighthearted","likable","likely","limited","limp","limping","linear","lined","liquid","little","live","lively","livid","loathsome","lone","lonely","long","long-term","loose","lopsided","lost","loud","lovable","lovely","loving","low","loyal","lucky","lumbering","luminous","lumpy","lustrous","luxurious","mad","made-up","magnificent","majestic","major","male","mammoth","married","marvelous","masculine","massive","mature","meager","mealy","mean","measly","meaty","medical","mediocre","medium","meek","mellow","melodic","memorable","menacing","merry","messy","metallic","mild","milky","mindless","miniature","minor","minty","miserable","miserly","misguided","misty","mixed","modern","modest","moist","monstrous","monthly","monumental","moral","mortified","motherly","motionless","mountainous","muddy","muffled","multicolored","mundane","murky","mushy","musty","muted","mysterious","naive","narrow","nasty","natural","naughty","nautical","near","neat","necessary","needy","negative","neglected","negligible","neighboring","nervous","new","next","nice","nifty","nimble","nippy","nocturnal","noisy","nonstop","normal","notable","noted","noteworthy","novel","noxious","numb","nutritious","nutty","obedient","obese","oblong","oily","oblong","obvious","occasional","odd","oddball","offbeat","offensive","official","old","old-fashioned","only","open","optimal","optimistic","opulent","orange","orderly","organic","ornate","ornery","ordinary","original","other","our","outlying","outgoing","outlandish","outrageous","outstanding","oval","overcooked","overdue","overjoyed","overlooked","palatable","pale","paltry","parallel","parched","partial","passionate","past","pastel","peaceful","peppery","perfect","perfumed","periodic","perky","personal","pertinent","pesky","pessimistic","petty","phony","physical","piercing","pink","pitiful","plain","plaintive","plastic","playful","pleasant","pleased","pleasing","plump","plush","polished","polite","political","pointed","pointless","poised","poor","popular","portly","posh","positive","possible","potable","powerful","powerless","practical","precious","present","prestigious","pretty","precious","previous","pricey","prickly","primary","prime","pristine","private","prize","probable","productive","profitable","profuse","proper","proud","prudent","punctual","pungent","puny","pure","purple","pushy","putrid","puzzled","puzzling","quaint","qualified","quarrelsome","quarterly","queasy","querulous","questionable","quick","quick-witted","quiet","quintessential","quirky","quixotic","quizzical","radiant","ragged","rapid","rare","rash","raw","recent","reckless","rectangular","ready","real","realistic","reasonable","red","reflecting","regal","regular","reliable","relieved","remarkable","remorseful","remote","repentant","required","respectful","responsible","repulsive","revolving","rewarding","rich","rigid","right","ringed","ripe","roasted","robust","rosy","rotating","rotten","rough","round","rowdy","royal","rubbery","rundown","ruddy","rude","runny","rural","rusty","sad","safe","salty","same","sandy","sane","sarcastic","sardonic","satisfied","scaly","scarce","scared","scary","scented","scholarly","scientific","scornful","scratchy","scrawny","second","secondary","second-hand","secret","self-assured","self-reliant","selfish","sentimental","separate","serene","serious","serpentine","several","severe","shabby","shadowy","shady","shallow","shameful","shameless","sharp","shimmering","shiny","shocked","shocking","shoddy","short","short-term","showy","shrill","shy","sick","silent","silky","silly","silver","similar","simple","simplistic","sinful","single","sizzling","skeletal","skinny","sleepy","slight","slim","slimy","slippery","slow","slushy","small","smart","smoggy","smooth","smug","snappy","snarling","sneaky","sniveling","snoopy","sociable","soft","soggy","solid","somber","some","spherical","sophisticated","sore","sorrowful","soulful","soupy","sour","Spanish","sparkling","sparse","specific","spectacular","speedy","spicy","spiffy","spirited","spiteful","splendid","spotless","spotted","spry","square","squeaky","squiggly","stable","staid","stained","stale","standard","starchy","stark","starry","steep","sticky","stiff","stimulating","stingy","stormy","straight","strange","steel","strict","strident","striking","striped","strong","studious","stunning","stupendous","stupid","sturdy","stylish","subdued","submissive","substantial","subtle","suburban","sudden","sugary","sunny","super","superb","superficial","superior","supportive","sure-footed","surprised","suspicious","svelte","sweaty","sweet","sweltering","swift","sympathetic","tall","talkative","tame","tan","tangible","tart","tasty","tattered","taut","tedious","teeming","tempting","tender","tense","tepid","terrible","terrific","testy","thankful","that","these","thick","thin","third","thirsty","this","thorough","thorny","those","thoughtful","threadbare","thrifty","thunderous","tidy","tight","timely","tinted","tiny","tired","torn","total","tough","traumatic","treasured","tremendous","tragic","trained","tremendous","triangular","tricky","trifling","trim","trivial","troubled","true","trusting","trustworthy","trusty","truthful","tubby","turbulent","twin","ugly","ultimate","unacceptable","unaware","uncomfortable","uncommon","unconscious","understated","unequaled","uneven","unfinished","unfit","unfolded","unfortunate","unhappy","unhealthy","uniform","unimportant","unique","united","unkempt","unknown","unlawful","unlined","unlucky","unnatural","unpleasant","unrealistic","unripe","unruly","unselfish","unsightly","unsteady","unsung","untidy","untimely","untried","untrue","unused","unusual","unwelcome","unwieldy","unwilling","unwitting","unwritten","upbeat","upright","upset","urban","usable","used","useful","useless","utilized","utter","vacant","vague","vain","valid","valuable","vapid","variable","vast","velvety","venerated","vengeful","verifiable","vibrant","vicious","victorious","vigilant","vigorous","villainous","violet","violent","virtual","virtuous","visible","vital","vivacious","vivid","voluminous","wan","warlike","warm","warmhearted","warped","wary","wasteful","watchful","waterlogged","watery","wavy","wealthy","weak","weary","webbed","wee","weekly","weepy","weighty","weird","welcome","well-documented","well-groomed","well-informed","well-lit","well-made","well-off","well-to-do","well-worn","wet","which","whimsical","whirlwind","whispered","white","whole","whopping","wicked","wide","wide-eyed","wiggly","wild","willing","wilted","winding","windy","winged","wiry","wise","witty","wobbly","woeful","wonderful","wooden","woozy","wordy","worldly","worn","worried","worrisome","worse","worst","worthless","worthwhile","worthy","wrathful","wretched","writhing","wrong","wry","yawning","yearly","yellow","yellowish","young","youthful","yummy","zany","zealous","zesty","zigzag","rocky"];
        var name2 = ["people","history","way","art","world","information","map","family","government","health","system","computer","meat","year","thanks","music","person","reading","method","data","food","understanding","theory","law","bird","literature","problem","software","control","knowledge","power","ability","economics","love","internet","television","science","library","nature","fact","product","idea","temperature","investment","area","society","activity","story","industry","media","thing","oven","community","definition","safety","quality","development","language","management","player","variety","video","week","security","country","exam","movie","organization","equipment","physics","analysis","policy","series","thought","basis","boyfriend","direction","strategy","technology","army","camera","freedom","paper","environment","child","instance","month","truth","marketing","university","writing","article","department","difference","goal","news","audience","fishing","growth","income","marriage","user","combination","failure","meaning","medicine","philosophy","teacher","communication","night","chemistry","disease","disk","energy","nation","road","role","soup","advertising","location","success","addition","apartment","education","math","moment","painting","politics","attention","decision","event","property","shopping","student","wood","competition","distribution","entertainment","office","population","president","unit","category","cigarette","context","introduction","opportunity","performance","driver","flight","length","magazine","newspaper","relationship","teaching","cell","dealer","debate","finding","lake","member","message","phone","scene","appearance","association","concept","customer","death","discussion","housing","inflation","insurance","mood","woman","advice","blood","effort","expression","importance","opinion","payment","reality","responsibility","situation","skill","statement","wealth","application","city","county","depth","estate","foundation","grandmother","heart","perspective","photo","recipe","studio","topic","collection","depression","imagination","passion","percentage","resource","setting","ad","agency","college","connection","criticism","debt","description","memory","patience","secretary","solution","administration","aspect","attitude","director","personality","psychology","recommendation","response","selection","storage","version","alcohol","argument","complaint","contract","emphasis","highway","loss","membership","possession","preparation","steak","union","agreement","cancer","currency","employment","engineering","entry","interaction","limit","mixture","preference","region","republic","seat","tradition","virus","actor","classroom","delivery","device","difficulty","drama","election","engine","football","guidance","hotel","match","owner","priority","protection","suggestion","tension","variation","anxiety","atmosphere","awareness","bread","climate","comparison","confusion","construction","elevator","emotion","employee","employer","guest","height","leadership","mall","manager","operation","recording","respect","sample","transportation","boring","charity","cousin","disaster","editor","efficiency","excitement","extent","feedback","guitar","homework","leader","mom","outcome","permission","presentation","promotion","reflection","refrigerator","resolution","revenue","session","singer","tennis","basket","bonus","cabinet","childhood","church","clothes","coffee","dinner","drawing","hair","hearing","initiative","judgment","lab","measurement","mode","mud","orange","poetry","police","possibility","procedure","queen","ratio","relation","restaurant","satisfaction","sector","signature","significance","song","tooth","town","vehicle","volume","wife","accident","airport","appointment","arrival","assumption","baseball","chapter","committee","conversation","database","enthusiasm","error","explanation","farmer","gate","girl","hall","historian","hospital","injury","instruction","maintenance","manufacturer","meal","perception","pie","poem","presence","proposal","reception","replacement","revolution","river","son","speech","tea","village","warning","winner","worker","writer","assistance","breath","buyer","chest","chocolate","conclusion","contribution","cookie","courage","desk","drawer","establishment","examination","garbage","grocery","honey","impression","improvement","independence","insect","inspection","inspector","king","ladder","menu","penalty","piano","potato","profession","professor","quantity","reaction","requirement","salad","sister","supermarket","tongue","weakness","wedding","affair","ambition","analyst","apple","assignment","assistant","bathroom","bedroom","beer","birthday","celebration","championship","cheek","client","consequence","departure","diamond","dirt","ear","fortune","friendship","funeral","gene","girlfriend","hat","indication","intention","lady","midnight","negotiation","obligation","passenger","pizza","platform","poet","pollution","recognition","reputation","shirt","speaker","stranger","surgery","sympathy","tale","throat","trainer","uncle","youth","time","work","film","water","money","example","while","business","study","game","life","form","air","day","place","number","part","field","fish","back","process","heat","hand","experience","job","book","end","point","type","home","economy","value","body","market","guide","interest","state","radio","course","company","price","size","card","list","mind","trade","line","care","group","risk","word","fat","force","key","light","training","name","school","top","amount","level","order","practice","research","sense","service","piece","web","boss","sport","fun","house","page","term","test","answer","sound","focus","matter","kind","soil","board","oil","picture","access","garden","range","rate","reason","future","site","demand","exercise","image","case","cause","coast","action","age","bad","boat","record","result","section","building","mouse","cash","class","period","plan","store","tax","side","subject","space","rule","stock","weather","chance","figure","man","model","source","beginning","earth","program","chicken","design","feature","head","material","purpose","question","rock","salt","act","birth","car","dog","object","scale","sun","note","profit","rent","speed","style","war","bank","craft","half","inside","outside","standard","bus","exchange","eye","fire","position","pressure","stress","advantage","benefit","box","frame","issue","step","cycle","face","item","metal","paint","review","room","screen","structure","view","account","ball","discipline","medium","share","balance","bit","black","bottom","choice","gift","impact","machine","shape","tool","wind","address","average","career","culture","morning","pot","sign","table","task","condition","contact","credit","egg","hope","ice","network","north","square","attempt","date","effect","link","post","star","voice","capital","challenge","friend","self","shot","brush","couple","exit","front","function","lack","living","plant","plastic","spot","summer","taste","theme","track","wing","brain","button","click","desire","foot","gas","influence","notice","rain","wall","base","damage","distance","feeling","pair","savings","staff","sugar","target","text","animal","author","budget","discount","file","ground","lesson","minute","officer","phase","reference","register","sky","stage","stick","title","trouble","bowl","bridge","campaign","character","club","edge","evidence","fan","letter","lock","maximum","novel","option","pack","park","quarter","skin","sort","weight","baby","background","carry","dish","factor","fruit","glass","joint","master","muscle","red","strength","traffic","trip","vegetable","appeal","chart","gear","ideal","kitchen","land","log","mother","net","party","principle","relative","sale","season","signal","spirit","street","tree","wave","belt","bench","commission","copy","drop","minimum","path","progress","project","sea","south","status","stuff","ticket","tour","angle","blue","breakfast","confidence","daughter","degree","doctor","dot","dream","duty","essay","father","fee","finance","hour","juice","luck","milk","mouth","peace","pipe","stable","storm","substance","team","trick","afternoon","bat","beach","blank","catch","chain","consideration","cream","crew","detail","gold","interview","kid","mark","mission","pain","pleasure","score","screw","sex","shop","shower","suit","tone","window","agent","band","bath","block","bone","calendar","candidate","cap","coat","contest","corner","court","cup","district","door","east","finger","garage","guarantee","hole","hook","implement","layer","lecture","lie","manner","meeting","nose","parking","partner","profile","rice","routine","schedule","swimming","telephone","tip","winter","airline","bag","battle","bed","bill","bother","cake","code","curve","designer","dimension","dress","ease","emergency","evening","extension","farm","fight","gap","grade","holiday","horror","horse","host","husband","loan","mistake","mountain","nail","noise","occasion","package","patient","pause","phrase","proof","race","relief","sand","sentence","shoulder","smoke","stomach","string","tourist","towel","vacation","west","wheel","wine","arm","aside","associate","bet","blow","border","branch","breast","brother","buddy","bunch","chip","coach","cross","document","draft","dust","expert","floor","god","golf","habit","iron","judge","knife","landscape","league","mail","mess","native","opening","parent","pattern","pin","pool","pound","request","salary","shame","shelter","shoe","silver","tackle","tank","trust","assist","bake","bar","bell","bike","blame","boy","brick","chair","closet","clue","collar","comment","conference","devil","diet","fear","fuel","glove","jacket","lunch","monitor","mortgage","nurse","pace","panic","peak","plane","reward","row","sandwich","shock","spite","spray","surprise","till","transition","weekend","welcome","yard","alarm","bend","bicycle","bite","blind","bottle","cable","candle","clerk","cloud","concert","counter","flower","grandfather","harm","knee","lawyer","leather","load","mirror","neck","pension","plate","purple","ruin","ship","skirt","slice","snow","specialist","stroke","switch","trash","tune","zone","anger","award","bid","bitter","boot","bug","camp","candy","carpet","cat","champion","channel","clock","comfort","cow","crack","engineer","entrance","fault","grass","guy","hell","highlight","incident","island","joke","jury","leg","lip","mate","motor","nerve","passage","pen","pride","priest","prize","promise","resident","resort","ring","roof","rope","sail","scheme","script","sock","station","toe","tower","truck","witness","can","will","other","use","make","good","look","help","go","great","being","still","public","read","keep","start","give","human","local","general","specific","long","play","feel","high","put","common","set","change","simple","past","big","possible","particular","major","personal","current","national","cut","natural","physical","show","try","check","second","call","move","pay","let","increase","single","individual","turn","ask","buy","guard","hold","main","offer","potential","professional","international","travel","cook","alternative","special","working","whole","dance","excuse","cold","commercial","low","purchase","deal","primary","worth","fall","necessary","positive","produce","search","present","spend","talk","creative","tell","cost","drive","green","support","glad","remove","return","run","complex","due","effective","middle","regular","reserve","independent","leave","original","reach","rest","serve","watch","beautiful","charge","active","break","negative","safe","stay","visit","visual","affect","cover","report","rise","walk","white","junior","pick","unique","classic","final","lift","mix","private","stop","teach","western","concern","familiar","fly","official","broad","comfortable","gain","rich","save","stand","young","heavy","lead","listen","valuable","worry","handle","leading","meet","release","sell","finish","normal","press","ride","secret","spread","spring","tough","wait","brown","deep","display","flow","hit","objective","shoot","touch","cancel","chemical","cry","dump","extreme","push","conflict","eat","fill","formal","jump","kick","opposite","pass","pitch","remote","total","treat","vast","abuse","beat","burn","deposit","print","raise","sleep","somewhere","advance","consist","dark","double","draw","equal","fix","hire","internal","join","kill","sensitive","tap","win","attack","claim","constant","drag","drink","guess","minor","pull","raw","soft","solid","wear","weird","wonder","annual","count","dead","doubt","feed","forever","impress","repeat","round","sing","slide","strip","wish","combine","command","dig","divide","equivalent","hang","hunt","initial","march","mention","spiritual","survey","tie","adult","brief","crazy","escape","gather","hate","prior","repair","rough","sad","scratch","sick","strike","employ","external","hurt","illegal","laugh","lay","mobile","nasty","ordinary","respond","royal","senior","split","strain","struggle","swim","train","upper","wash","yellow","convert","crash","dependent","fold","funny","grab","hide","miss","permit","quote","recover","resolve","roll","sink","slip","spare","suspect","sweet","swing","twist","upstairs","usual","abroad","brave","calm","concentrate","estimate","grand","male","mine","prompt","quiet","refuse","regret","reveal","rush","shake","shift","shine","steal","suck","surround","bear","brilliant","dare","dear","delay","drunk","female","hurry","inevitable","invite","kiss","neat","pop","punch","quit","reply","representative","resist","rip","rub","silly","smile","spell","stretch","stupid","tear","temporary","tomorrow","wake","wrap","yesterday","Thomas","Tom","Lieuwe"];
        var name = capFirst(name1[getRandomInt(0, name1.length + 1)]) + ' ' + capFirst(name2[getRandomInt(0, name2.length + 1)]);
        return name;
      }
      async function onInitLoad(query) {
          let params = new URLSearchParams(query);
          let load = params.get("load");
          let session = params.get("session");
          let s = params.get("s");
          let final = load ? load : (session ? session : (s ? s : null));
          onloadDownload = final;
      }
      var query = window.location.search;
      onInitLoad(query);
    </script>
  </body>
</html>
